<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Sistema de captura de bases - Evento Airsoft India vs Pakistán">
    <meta name="theme-color" content="#0B0F12">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Captura de Base - Airsoft</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body data-api="">
    <!-- Selector de bando (cuando no hay ?team=) -->
    <div id="teamSelector" class="selector hidden">
        <div class="selector-container">
            <h1 class="glitch" data-text="OPERACIÓN CAPTURA">OPERACIÓN CAPTURA</h1>
            <p class="selector-subtitle">Selecciona tu bando</p>
            <div class="team-buttons">
                <button class="team-btn india" data-team="india">
                    <svg class="flag-icon" viewBox="0 0 60 40">
                        <rect width="60" height="13.33" fill="#FF9933"/>
                        <rect y="13.33" width="60" height="13.33" fill="#FFFFFF"/>
                        <rect y="26.67" width="60" height="13.33" fill="#138808"/>
                        <circle cx="30" cy="20" r="5" fill="none" stroke="#000080" stroke-width="0.8"/>
                    </svg>
                    <span>Bando India</span>
                </button>
                <button class="team-btn pakistan" data-team="pakistan">
                    <svg class="flag-icon" viewBox="0 0 60 40">
                        <rect width="60" height="40" fill="#01411C"/>
                        <rect width="15" height="40" fill="#FFFFFF"/>
                        <circle cx="35" cy="20" r="6" fill="none" stroke="#FFFFFF" stroke-width="1.2"/>
                        <path d="M 38 15 L 41 20 L 38 25 L 35 22 L 35 18 Z" fill="#FFFFFF"/>
                    </svg>
                    <span>Bando Pakistán</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Pantalla de animación GPS -->
    <div id="gpsAnimation" class="gps-animation hidden">
        <div class="map-container">
            <div class="map-overlay">
                <div class="crosshair"></div>
            </div>
            <canvas id="mapCanvas"></canvas>
            <div class="gps-info">
                <div class="scanning-text">LOCALIZANDO POSICIÓN...</div>
                <div class="coordinates" id="coordsDisplay">---, ---</div>
                <div class="status-text" id="gpsStatus">Obteniendo GPS...</div>
            </div>
        </div>
    </div>

    <!-- Pantalla principal del bando -->
    <main id="mainScreen" class="hidden">
        <!-- Header con bandera y nombre -->
        <header class="header">
            <div class="header-content">
                <svg id="teamFlag" class="team-flag" viewBox="0 0 60 40"></svg>
                <h1 id="teamName" class="team-name">BANDO</h1>
            </div>
            <div class="scan-line"></div>
        </header>

        <!-- Radar animado -->
        <div class="radar-container">
            <svg class="radar" viewBox="0 0 200 200">
                <defs>
                    <linearGradient id="radarGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:currentColor;stop-opacity:0.3" />
                        <stop offset="100%" style="stop-color:currentColor;stop-opacity:0" />
                    </linearGradient>
                </defs>
                <circle cx="100" cy="100" r="90" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3"/>
                <circle cx="100" cy="100" r="60" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3"/>
                <circle cx="100" cy="100" r="30" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3"/>
                <line x1="100" y1="10" x2="100" y2="190" stroke="currentColor" stroke-width="0.5" opacity="0.2"/>
                <line x1="10" y1="100" x2="190" y2="100" stroke="currentColor" stroke-width="0.5" opacity="0.2"/>
                <path id="radarSweep" d="M 100 100 L 100 10 A 90 90 0 0 1 190 100 Z" fill="url(#radarGradient)" opacity="0.6"/>
            </svg>
        </div>

        <!-- Contenedor del mini-juego -->
        <div id="gameContainer" class="game-container">
            <h2 class="game-title">DESACTIVAR SISTEMA DE SEGURIDAD</h2>
            <p class="game-instructions">Conecta los cables correctamente</p>
            
            <div class="wires-game">
                <div class="pins left-pins" id="leftPins"></div>
                <svg class="connections" id="connections" viewBox="0 0 300 400" preserveAspectRatio="none"></svg>
                <div class="pins right-pins" id="rightPins"></div>
            </div>

            <div class="game-status" id="gameStatus">
                <span class="connections-count">Conectados: <span id="matchCount">0</span>/3</span>
            </div>
        </div>

        <!-- Pantalla de cooldown -->
        <div id="cooldownScreen" class="cooldown-screen hidden">
            <div class="cooldown-content">
                <svg class="cooldown-icon" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="3" opacity="0.3"/>
                    <circle cx="50" cy="50" r="35" fill="none" stroke="currentColor" stroke-width="2" opacity="0.5"/>
                    <path d="M 50 20 L 50 50 L 70 50" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <h2>BASE EN ENFRIAMIENTO</h2>
                <p class="cooldown-message">La base fue capturada recientemente</p>
                <div class="countdown" id="countdown">--:--</div>
                <button class="btn-secondary" onclick="window.location.href='index.html'">Volver</button>
            </div>
        </div>

        <!-- Overlay de éxito -->
        <div id="successOverlay" class="success-overlay hidden">
            <div class="success-content">
                <div class="success-pulse"></div>
                <svg class="success-icon" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="3"/>
                    <path d="M 30 50 L 45 65 L 70 35" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h2 class="success-title glitch" data-text="BASE CAPTURADA">BASE CAPTURADA</h2>
                <p class="success-message">Enviando datos al comando...</p>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
        </div>
    </main>

    <script src="app.js"></script>
</body>
</html>
